## 微信平台开发

### 应用类型和微信登录授权方式

| 应用类型 | 登录授权方式 | 备注 |
| --- | --- | --- |
| 移动应用(ios, android) | 跳转到weixin app | 需要申请移动应用AppId。可以考虑如sharesdk等第三方工具。|
| 网站应用 | 用微信扫二维码 | 需要申请网站应用。若是在手机上打开就没办法操作了。|
| 微信网页 | 跳转到授权页 | 不需要关注，使用公众号AppId。无法在普通浏览器中打开。**没有关注的用户在授权之后也不会自动关注公众号**|
| 公众号 | 关注，以及在公众号内的任何操作都能获取其openid | 公众号可以认为是一种特殊的应用类型。|

> 微信内网页的授权没有办法在普通浏览器中打开。以及网页端的微信支付也只能在微信内网页发起。

###  关于自动关注
![自动关注例子](https://pic4.zhimg.com/9454017278b3ba56bd0ff55382554fb7_b.jpg)

只有开通支付，用户支付成功的页面才会出现关注的勾选或是默认关注。没有专门的自动关注接口。

1. 刷卡支付默认有推荐关注
2. 公众号支付和扫码支付需要5元以上才有推荐关注
3. APP支付默认没有，需要申请配置，需要有一定用户规模才可以申请
4. 已经关注的不展示推荐栏
5. 服务号未设置头像的在IOS不展示推荐关注栏
6. 用户取消过关注的默认不勾选
7. 服务商模式的，需要在特约商户开发配置页设置推荐关注appid
8. 订阅号目前是不会有默认推荐关注的


### 关于应用间的微信Id统一问题

open id
> 针对每个应用，每个微信用户都有唯一的open id。但不同的应用之间并不一样。开发者可通过open id获取用户个人信息。

union id
> 如果开发者拥有多个移动应用、网站应用和公众帐号，可通过获取用户基本信息中的unionid来区分用户的唯一性。只要是同一个微信开放平台帐号下的移动应用、网站应用和公众帐号，用户的unionid是唯一的。换句话说，同一用户，对同一个微信开放平台下的不同应用，unionid是相同的。

> **需要前往微信开放平台（open.weixin.qq.com）绑定公众号后，才可利用UnionID机制来满足上述需求。**

### 公众号开发
公众号可以认为是一种特殊的app，可以跟微信内网页做深度集成，比如
* 提供一些外部链接，如app下载链接
* 直接跳转到某个业务页面
* 在公众号内做一些信息展示，活动通知
* 跟用户交互，比如输入关键词做一些对应的回复
